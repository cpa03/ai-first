name = "ai-first"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Cloudflare Pages configuration for Next.js
pages_build_output_dir = ".next"

[env.production]
name = "ai-first"

[env.staging] 
name = "ai-first-staging"

# Environment variables (these will be set via Cloudflare dashboard or wrangler secrets)
# NOTE: In CI/Cloudflare Pages builds, missing env vars will only warn, not fail
[vars]
NEXT_PUBLIC_APP_URL = "https://ideaflow.ai"
NODE_ENV = "production"
CI = "true"

# Build configuration
# Using build:ci which skips strict env validation for CI environments
[build]
command = "npm ci && npm run build:ci"

# For Cloudflare Pages deployment
# Build command: npm run build:ci (CI mode with lenient env validation)
# Output directory: .next
